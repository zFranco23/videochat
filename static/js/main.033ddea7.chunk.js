(this.webpackJsonpweb_rtc_chat_app=this.webpackJsonpweb_rtc_chat_app||[]).push([[0],{130:function(e,t){},132:function(e,t){},148:function(e,t,a){},149:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(9),r=a.n(c),i=a(19),l=a(82),s=a(54),o=a.n(s),d=a(4),j=Object(n.createContext)(),u=Object(l.io)("https://back-video-chat.herokuapp.com"),b=function(e){var t=e.children,a=Object(n.useState)(null),c=Object(i.a)(a,2),r=c[0],l=c[1],s=Object(n.useState)(""),b=Object(i.a)(s,2),m=b[0],x=b[1],p=Object(n.useState)({}),O=Object(i.a)(p,2),h=O[0],f=O[1],g=Object(n.useState)(!1),v=Object(i.a)(g,2),w=v[0],C=v[1],y=Object(n.useState)(!1),N=Object(i.a)(y,2),k=N[0],I=N[1],S=Object(n.useState)(""),D=Object(i.a)(S,2),B=D[0],A=D[1],R=Object(n.useRef)(),V=Object(n.useRef)(),_=Object(n.useRef)();Object(n.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){l(e),R.current.srcObject=e})),u.on("me",(function(e){return x(e)})),u.on("calluser",(function(e){var t=e.from,a=e.name,n=e.signal;f({isReceivedCall:!0,from:t,name:a,signal:n})}))}),[]);return Object(d.jsx)(j.Provider,{value:{call:h,callAccepted:w,myVideo:R,userVideo:V,stream:r,name:B,setName:A,callEnded:k,me:m,callUser:function(e){var t=new o.a({initiator:!0,trickle:!1,stream:r});t.on("signal",(function(t){u.emit("calluser",{userToCall:e,signalData:t,from:m,name:B})})),t.on("stream",(function(e){V.current.srcObject=e})),u.on("callaccepted",(function(e){C(!0),t.signal(e)})),_.current=t},leaveCall:function(){I(!0),_.current.destroy(),window.location.reload()},answerCall:function(){C(!0);var e=new o.a({initiator:!1,trickle:!1,stream:r});e.on("signal",(function(e){u.emit("answercall",{signal:e,to:h.from})})),e.on("stream",(function(e){V.current.srcObject=e})),e.signal(h.signal),_.current=e}},children:t})},m=a(22),x=a(190),p=a(185),O=a(180),h=a(183),f=a(150),g=Object(O.a)((function(e){return{video:Object(m.a)({width:"550px"},e.breakpoints.down("xs"),{width:"300px"}),gridContainer:Object(m.a)({justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column"}),paper:{padding:"10px",border:"2px solid black",margin:"10px"}}}));var v=function(){var e=Object(n.useContext)(j),t=e.name,a=e.callAccepted,c=e.myVideo,r=e.userVideo,i=e.callEnded,l=e.stream,s=e.call,o=g();return Object(d.jsx)("div",{children:Object(d.jsxs)(h.a,{container:!0,className:o.gridContainer,children:[l&&Object(d.jsx)(f.a,{className:o.paper,children:Object(d.jsxs)(h.a,{item:!0,xs:12,md:6,children:[Object(d.jsx)(p.a,{variant:"h5",gutterBottom:!0,children:t||"Name"}),Object(d.jsx)("video",{playsInline:!0,muted:!0,ref:c,autoPlay:!0,className:o.video})]})}),a&&!i&&Object(d.jsx)(f.a,{className:o.paper,children:Object(d.jsxs)(h.a,{item:!0,xs:12,md:6,children:[Object(d.jsx)(p.a,{variant:"h5",gutterBottom:!0,children:s.name||"Name"}),Object(d.jsx)("video",{playsInline:!0,ref:r,autoPlay:!0,className:o.video})]})})]})})},w=a(186),C=a(191),y=a(192),N=a(88),k=a(187),I=a(188),S=a(189),D=Object(O.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(m.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(m.a)({width:"600px",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:20},paper:{padding:"10px 20px",border:"2px solid black"}}}));var B=function(e){var t=e.children,a=Object(n.useContext)(j),c=a.me,r=a.callAccepted,l=a.name,s=a.setName,o=a.leaveCall,u=a.callUser,b=a.callEnded,m=Object(n.useState)(""),x=Object(i.a)(m,2),O=x[0],g=x[1],v=D();return Object(d.jsx)(w.a,{className:v.container,children:Object(d.jsxs)(f.a,{elevation:10,className:v.paper,children:[Object(d.jsx)("form",{className:v.root,noValidate:!0,children:Object(d.jsxs)(h.a,{container:!0,className:v.gridContainer,children:[Object(d.jsxs)(h.a,{item:!0,xs:12,md:6,className:v.padding,children:[Object(d.jsx)(p.a,{gutterBottom:!0,variant:"h6",children:"Account Info"}),Object(d.jsx)(C.a,{label:"Name",value:l,onChange:function(e){return s(e.target.value)},fullWidth:!0}),Object(d.jsx)(N.CopyToClipboard,{text:c,className:v.margin,children:Object(d.jsx)(y.a,{variant:"contained",color:"primary",fullWidth:!0,startIcon:Object(d.jsx)(k.a,{fontSize:"large"}),children:"Copy your ID"})})]}),Object(d.jsxs)(h.a,{item:!0,xs:12,md:6,className:v.padding,children:[Object(d.jsx)(p.a,{gutterBottom:!0,variant:"h6",children:"Make a call"}),Object(d.jsx)(C.a,{label:"ID to call",value:O,onChange:function(e){return g(e.target.value)},fullWidth:!0}),r&&!b?Object(d.jsx)(y.a,{variant:"contained",color:"secondary",startIcon:Object(d.jsx)(I.a,{fontSize:"large"}),fullWidth:!0,onClick:o,className:v.margin,children:"Hang Up"}):Object(d.jsx)(y.a,{variant:"contained",color:"secondary",startIcon:Object(d.jsx)(S.a,{fontSize:"large"}),fullWidth:!0,onClick:function(){return u(O)},className:v.margin,children:"Call"})]})]})}),t]})})};var A=function(){var e=Object(n.useContext)(j),t=e.answerCall,a=e.call,c=e.callAccepted;return Object(d.jsx)(d.Fragment,{children:a.isReceivedCall&&!c&&Object(d.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(d.jsxs)("h1",{children:[a.name," is calling"]}),Object(d.jsx)(y.a,{variant:"contained",color:"primary",onClick:t,children:"Answer"})]})})},R=Object(O.a)((function(e){return{appBar:Object(m.a)({borderRadius:15,margin:"30px 100px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"600px",border:"2px solid black"},e.breakpoints.down("xs"),{width:"90%"}),image:{marginLeft:"15px"},wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}}));var V=function(){var e=R();return Object(d.jsxs)("div",{className:e.wrapper,children:[Object(d.jsx)(x.a,{className:e.appBar,position:"static",color:"inherit",children:Object(d.jsx)(p.a,{variant:"h2",align:"center",children:"Video Chat"})}),Object(d.jsx)(v,{}),Object(d.jsx)(B,{children:Object(d.jsx)(A,{})})]})};a(148);r.a.render(Object(d.jsx)(b,{children:Object(d.jsx)(V,{})}),document.getElementById("root"))}},[[149,1,2]]]);
//# sourceMappingURL=main.033ddea7.chunk.js.map